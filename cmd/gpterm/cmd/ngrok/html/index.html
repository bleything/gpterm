<!doctype html>
<html>
<head>
  <link rel="stylesheet" href="node_modules/xterm/css/xterm.css" />
  <script src="node_modules/xterm/lib/xterm.js"></script>
</head>
<body>
  <div id="terminal"></div>
  <script>
	var term = new Terminal();
	term.open(document.getElementById('terminal'));

	var protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
	var socket = new WebSocket(`${protocol}//${window.location.host}/ws`);

	console.log("Here")

	// When a message is received from the server, write its data to the terminal
    socket.addEventListener('message', function (event) {
	  console.log("Received message")
      term.write(event.data);
    });

	// Send user input from the terminal to the server
    term.onData(function (data) {
	  console.log("Sending data", data)
      socket.send(data);
    });

	//term.write('Hello from \x1B[1;3;31mxterm.js\x1B[0m $ ')
  </script>
</body>
</html>
